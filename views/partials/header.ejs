<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <title>Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.14.0/css/all.css" integrity="sha384-HzLeBuhoNPvSl5KYnjx0BT+WB0QEEqLprO+NBkkk5gbc67FTaL7XIGa2w1L0Xbgc" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.js" type="text/javascript"></script>
    <script type="text/javascript" language="javascript">
//mqtt code
let mqtt;
const reconnectTimeout = 2000;
const host = "192.168.1.15"; 
const port = 9001;

function onConnect() {
// Once a connection has been made, make a subscription and send a message.
    console.log("onConnect");
    mqtt.subscribe("#");
    message = new Paho.MQTT.Message("Connected");
    message.destinationName = "ardu/I01";
    mqtt.send(message);
 }

function MQTTconnect(){
  mqtt = new Paho.MQTT.Client(host, port, "clientjs");
  mqtt.onMessageArrived = onMessageArrived;
  mqtt.connect({timeout: 3, onSuccess: onConnect}); //connect
}

function OnOff(dato, I) {
  message = new Paho.MQTT.Message(dato);
  message.destinationName = I;
  mqtt.send(message);
}

function onMessageArrived(message) {
  for(let i = 1; i <= 10; i++){
      if(i = 10){
        if (message.destinationName == "ardu/I" + i) { //acá coloco el topic
            document.getElementById("I" + i).textContent = message.payloadString;
          }
      }else{
        if (message.destinationName == "ardu/I0" + i) { //acá coloco el topic
            document.getElementById("I" + i).textContent = message.payloadString;
          }
      }
  }
};      
    </script>
    <nav class="navbar navbar-expand-lg navbar-dark ">
        <a class="navbar-brand" href="/">DASHBOARD</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
          <div class="navbar-nav">
            <a class="nav-link" href="/login">Login</a>
            <a class="nav-link" href="/dashboard">Dashboard</a>
            <a class="nav-link" href="/about">About</a>
            <a class="nav-link" href="/logout">Log out</a>
          </div>
        </div>
      </nav>
  </head>
  <body>
